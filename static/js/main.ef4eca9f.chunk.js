(this["webpackJsonpkode-tasks"]=this["webpackJsonpkode-tasks"]||[]).push([[0],{28:function(e,t,a){e.exports=a.p+"static/media/404.626adc7f.png"},29:function(e,t,a){e.exports=a.p+"static/media/logo.96c5ba35.png"},34:function(e,t,a){e.exports=a(62)},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),l=a.n(r),s=a(4),o=a(2),m=a(1),i=Object(n.createContext)([{},function(){}]),u=function(e){var t=e.children,a=Object(n.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),r=Object(m.a)(a,2),l=r[0],s=r[1];return c.a.createElement(i.Provider,{value:[l,s]},t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(n.useState)((function(){return localStorage.getItem(e)||t})),c=Object(m.a)(a,2),r=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,l]},p=function(){var e=d("token"),t=Object(m.a)(e,1)[0],a=Object(n.useState)(!1),c=Object(m.a)(a,2),r=c[0],l=c[1],s=Object(n.useState)(null),i=Object(m.a)(s,2),u=i[0],p=i[1],b=Object(n.useState)(null),g=Object(m.a)(b,2),E=g[0],f=g[1],h=Object(n.useState)({}),j=Object(m.a)(h,2),O=j[0],y=j[1],v=Object(n.useState)(""),N=Object(m.a)(v,2),k=N[0],x=N[1],w=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(e),l(!0)}),[]);return Object(n.useEffect)((function(){var e=Object(o.a)(Object(o.a)({},O),{headers:{authorization:t?"Token ".concat(t):""}});r&&(e.headers.authorization&&(l(!1),p({user:{name:"KODEr",id:1,token:e.headers.authorization}})),e.data&&"kode@kode.ru"===e.data.user.email&&"Enk0deng"===e.data.user.password?(l(!1),x(Math.ceil(1e4*Math.random())),p({user:{name:"KODEr",id:1,token:Math.random()}})):(l(!1),f("Invalid data")))}),[r,O,t]),[{isLoading:r,response:u,error:E,otp:k},w]},b=function(e){var t=e.children,a=p(),c=Object(m.a)(a,2),r=c[0].response,l=c[1],s=Object(n.useContext)(i),u=Object(m.a)(s,2)[1],b=d("token"),g=Object(m.a)(b,1)[0];return Object(n.useEffect)((function(){g?(l(),u((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0})}))):u((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1})}))}),[u,g,l]),Object(n.useEffect)((function(){r&&u((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:!0,currentUser:r.user})}))}),[r,u]),t},g=a(3),E=a(28),f=a.n(E),h=function(){return c.a.createElement("div",{className:"error404"},c.a.createElement("h1",{style:{textAlign:"center"}},"This is not the pokemon you looking for ",c.a.createElement("hr",null),"Error 404"),c.a.createElement("div",{className:"img col-md-12 justify-content-center d-flex"},c.a.createElement("img",{className:"w-75",src:f.a,alt:"404"})))},j=a(29),O=a.n(j),y=function(e){var t=Object(n.useContext)(i),a=Object(m.a)(t,2)[1],r=Object(n.useState)(e.location&&e.location.state&&e.location.state.from.pathname),l=Object(m.a)(r,1)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",{className:"navbar navbar-dark bg-dark d-flex justify-content-between"},c.a.createElement("div",{className:"container"},e.detail?c.a.createElement(s.b,{className:"btn btn-light",style:{height:"40px"},to:l&&l||"/"},"Back"):c.a.createElement(s.b,{to:"/",className:"btn logo",style:{height:"40px",padding:"0"}},c.a.createElement("img",{src:O.a,alt:"logo",height:"100%"})),c.a.createElement(s.b,{className:"text-light",onClick:function(){return a((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:null,currentUser:null})})),void localStorage.removeItem("token")},to:"/login"},"Logout"))))},v=a(31),N=a.n(v),k=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),s=Object(m.a)(l,2),o=s[0],i=s[1],u=Object(n.useState)(null),d=Object(m.a)(u,2),p=d[0],b=d[1],g=Object(n.useState)({}),E=Object(m.a)(g,2),f=E[0],h=E[1],j=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(e),r(!0)}),[]);return Object(n.useEffect)((function(){c&&N()("https://api.pokemontcg.io/v1"+e,f).then((function(e){r(!1),i(e)})).catch((function(e){r(!1),b(e.response)}))}),[c,f,e]),[{isLoading:c,response:o,error:p},j]},x=(a(61),function(){return c.a.createElement("div",{className:"lds-ring"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))}),w=function(e){var t=k("/cards/".concat(e.match.params.id)),a=Object(m.a)(t,2),r=a[0],l=r.isLoading,s=r.response,o=r.error,i=a[1];return Object(n.useEffect)((function(){i()}),[i]),c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{location:e.location,detail:!0}),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"card bg-light card-item my-3"},c.a.createElement("div",{className:"row no-gutters justify-content-center"},!s&&l&&c.a.createElement(x,null),!s&&o&&404===o.data.status&&c.a.createElement(h,null)||!s&&o&&c.a.createElement("h1",null,"Error status: ",o.data.status),s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-md-6"},s.data.card.imageUrlHiRes&&c.a.createElement("img",{src:s.data.card.imageUrlHiRes,alt:"".concat(s.data.card.name," img"),style:{maxWidth:"100%"},className:"card-img"}),s.data.card.ability&&c.a.createElement("div",{className:"card-item__description m-4"},s.data.card.ability.text," ")||s.data.card.text&&c.a.createElement("div",{className:"card-item__description m-4"},s.data.card.text.map((function(e){return e}))," ")||null),c.a.createElement("div",{className:"col-md-5 ml-5"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h1",{className:"card-title"},s.data.card.name?s.data.card.name:"Doesn't have name???"),s.data.card.types&&c.a.createElement("div",{className:"card-text card__type"},"Types: ",s.data.card.types),s.data.card.subtype&&c.a.createElement("div",{className:"card-text card__subtype"},"SubType: ",s.data.card.subtype),c.a.createElement("hr",null),c.a.createElement("div",{className:"card-text card__attacks"},c.a.createElement("strong",null,"Attacks:"),s.data.card.attacks?s.data.card.attacks.map((function(e){return c.a.createElement("div",{key:e.name},c.a.createElement("div",null,"Attack Name: ",e.name),e.text&&c.a.createElement("div",null,"Description: ")&&e.text,c.a.createElement("div",null,"Cost:"," ",e.cost.map((function(e,t){return c.a.createElement("span",{key:t},"".concat(e),", ")}))))})):" N/A",c.a.createElement("hr",null)),c.a.createElement("div",{className:"card-text card__resistance"},c.a.createElement("strong",null,"Resistance:"),s.data.card.resistances?s.data.card.resistances.map((function(e,t){return c.a.createElement("p",{key:t},"Type: ",e.type,c.a.createElement("br",null),"Value: ",e.value)})):" N/A"),c.a.createElement("hr",null),c.a.createElement("div",{className:"card-text card__evolves-from"},c.a.createElement("strong",null,"Evolves From: "),s.data.card.evolvesFrom?c.a.createElement("span",null,s.data.card.evolvesFrom):" N/A"))))))))},S=a(32),I=function(e,t,a){var n=[];return e.forEach((function(e){return 0===e.toLowerCase().indexOf(t.target.value.toLowerCase())&&n.push(e),e})),a(n),n},L=function(e){return/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@(([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},C=function(e){return/^[0-9a-zA-Z]{4,}$/.test(String(e))},A=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(m.a)(l,2),u=s[0],b=s[1],E=Object(n.useState)(!1),f=Object(m.a)(E,2),h=f[0],j=f[1],O=d("token"),y=Object(m.a)(O,2)[1],v=p(),N=Object(m.a)(v,2),k=N[0],x=k.isLoading,w=k.response,S=k.error,I=k.otp,A=N[1],_=Object(n.useContext)(i),F=Object(m.a)(_,2),z=F[0],T=F[1],M=Object(n.useState)(""),P=Object(m.a)(M,2),U=P[0],D=P[1],R=Object(n.useState)(""),B=Object(m.a)(R,2),H=B[0],V=B[1],Z=Object(n.useState)(!1),J=Object(m.a)(Z,2),K=J[0],$=J[1],W=Object(n.useState)({email:!0,password:!0}),q=Object(m.a)(W,2),G=q[0],Q=q[1];Object(n.useEffect)((function(){S&&D((function(){return c.a.createElement("p",null,"Invalid data")})),w&&(console.log("OTP:",I),$(!0))}),[w,S,I]);return h?c.a.createElement(g.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,z.isLoggedIn?c.a.createElement(g.a,{to:"/"}):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 mx-auto bg-light p-5 rounded-lg",style:{marginTop:"25vh"}},c.a.createElement("h1",null,"Auth"),!K&&c.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),Q({email:L(u),password:C(a)}),G.email&&G.email)&&A({method:"post",data:{user:{email:u,password:a}}})}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"loginInput"},"Login"),c.a.createElement("input",{type:"email",className:"form-control",id:"loginInput",onChange:function(e){return b(e.target.value)}}),G.email?null:c.a.createElement("p",null,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"passwordInput"},"Password"),c.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",onChange:function(e){return r(e.target.value)}}),G.password?null:c.a.createElement("p",null,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 password")),U&&U,c.a.createElement("button",{disabled:x,type:"submit",className:"btn btn-primary"},"Log in")),K&&c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),I===+H&&(y(w.user.token),T((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:!0,currentUser:w.user})})),j(!0))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"otpInput"},"Otp"),c.a.createElement("input",{type:"text",className:"form-control",id:"otpInput",onChange:function(e){return V(e.target.value)}})),U&&U,c.a.createElement("button",{disabled:x,type:"submit",className:"btn btn-primary"},"Confirm"))))))},_=function(e){var t=e.page,a=e.currentPage,n=e.url,r={pageItem:a===t?"active page-item":"page-item"};return c.a.createElement("li",{className:r.pageItem},c.a.createElement(s.b,{style:{height:"38px"},className:"page-link",to:"".concat(n,"?page=").concat(t)},t))},F=function(e){var t,a,n=e.total,r=e.limit,l=e.url,o=e.currentPage,m=Math.ceil(n/r),i=(t=1,a=m,Object(S.a)(Array(a).keys()).map((function(e){return e+t}))),u=[];if(0===i.length)return null;return c.a.createElement("ul",{className:"pagination justify-content-center align-items-center my-3 row"},o>4?c.a.createElement("li",{className:"page-item"},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=1"),style:{height:"38px"}},"1")):null,o>1?c.a.createElement("li",{className:"page-item"},c.a.createElement(s.b,{className:"page-link",style:{height:"38px"},to:"".concat(l,"?page=").concat(o-1)},c.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-left",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})))):null,function(){for(var e=i.length<6?1:o+3>=i.length?i.length-6+1:o-3>0?o-3:o-3<=0?1:void 0;e-1<i.length;e++){if(u.push(e),i.length===e)return[].concat(u);if(u.length>=6)return[].concat(u)}}().map((function(e){return c.a.createElement(_,{page:e,currentPage:o,url:l,key:e})})),o+1<=i.length?c.a.createElement("li",{className:"page-item"},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=").concat(o+1),style:{height:"38px"}},c.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-right",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"})))):null,o+3+1<i.length?c.a.createElement("li",{className:"page-item"},c.a.createElement(s.b,{style:{height:"38px"},className:"page-link",to:"".concat(l,"?page=").concat(i.length)},i.length)):null)},z=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1];return c.a.createElement("div",{className:"card"},c.a.createElement("button",{className:"btn btn-dark p-0",onClick:function(){return r&&l(!1),void(r||l(!0))}},c.a.createElement("div",{className:"card-header d-flex justify-content-between align-items-center"},e.label,c.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-arrow-down",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},c.a.createElement("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"})))||"Loading.."),r&&c.a.createElement("ul",{className:"list-group list-group-flush"},e.error&&c.a.createElement("li",{className:"list-group-item text-dark"},"Error"),e.isLoading&&c.a.createElement("li",{className:"list-group-item text-dark"},"Loading..."),e.children))},T=function(e){var t=k("/types"),a=Object(m.a)(t,2),r=a[0],l=r.isLoading,i=r.response,u=r.error,d=a[1],p=k("/subtypes"),b=Object(m.a)(p,2),g=b[0],E=g.isLoading,f=g.response,j=g.error,O=b[1],v=Object(n.useState)({}),N=Object(m.a)(v,2),w=N[0],S=N[1],L=Object(n.useState)(),C=Object(m.a)(L,2),A=C[0],_=C[1],T=Object(n.useState)(),M=Object(m.a)(T,2),P=M[0],U=M[1],D=Object(n.useState)({type:"",subtype:""}),R=Object(m.a)(D,2),B=R[0],H=R[1],V=k("/cards"),Z=Object(m.a)(V,2),J=Z[0],K=J.isLoading,$=J.response,W=J.error,q=Z[1],G=Object(n.useState)(""),Q=Object(m.a)(G,2),X=Q[0],Y=Q[1];return Object(n.useEffect)((function(){d(),O()}),[d,O]),Object(n.useEffect)((function(){_(f&&f.data.subtypes),U(i&&i.data.types)}),[_,U,f,i]),Object(n.useEffect)((function(){!w.subtype&&e.match.params.subtypeId&&S(Object(o.a)(Object(o.a)({},w),{},{subtype:e.match.params.subtypeId})),!w.type&&e.match.params.typeId&&S(Object(o.a)(Object(o.a)({},w),{},{type:e.match.params.typeId}))}),[e.match.params.subtypeId,e.match.params.typeId,w]),Object(n.useEffect)((function(){Y({method:"get",params:{types:w.type||e.match.params.typeId||null,subtype:w.subtype||e.match.params.subtypeId||null,pageSize:6,page:parseInt(e.location.search.replace(/[^\d]/g,""))||1}})}),[e.match,e.location.search,w]),Object(n.useEffect)((function(){X&&q(X)}),[q,X]),c.a.createElement(c.a.Fragment,null,c.a.createElement(y,null),c.a.createElement("div",{className:"container mt-5"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 selects"},c.a.createElement(z,{error:u||null,isLoading:l||null,label:"Types"},i&&c.a.createElement("input",{className:"form-control bg-secondary text-white",type:"text",onChange:function(e){I(i.data.types,e,U),H(Object(o.a)(Object(o.a)({},B),{},{type:e.target.value}))},defaultValue:B.type||""}),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(s.b,{className:"text-dark",onClick:function(){return S(Object(o.a)(Object(o.a)({},w),{},{type:null}))},to:w.subtype?"/cards/subtype/".concat(w.subtype):"/"},"All Types")),P&&P.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item"},c.a.createElement(s.b,{className:"text-dark",onClick:function(){return S(Object(o.a)(Object(o.a)({},w),{},{type:e}))},to:w.subtype?"/cards/type/".concat(e,"/subtype/").concat(w.subtype):"/cards/type/".concat(e)},e))}))),c.a.createElement(z,{error:j||null,isLoading:E||null,label:"Subtypes"},f&&c.a.createElement("input",{className:"form-control bg-secondary text-white",type:"text",onChange:function(e){I(f.data.subtypes,e,_),H(Object(o.a)(Object(o.a)({},B),{},{subtype:e.target.value}))},defaultValue:B.subtype||""}),c.a.createElement("li",{className:"list-group-item "},c.a.createElement(s.b,{className:"text-dark",onClick:function(){return S(Object(o.a)(Object(o.a)({},w),{},{subtype:null}))},to:w.type?"/cards/type/".concat(w.type):"/"},"All Subtypes")),A&&A.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item"},c.a.createElement(s.b,{className:"text-dark",onClick:function(){return S(Object(o.a)(Object(o.a)({},w),{},{subtype:e}))},to:w.type?"/cards/type/".concat(w.type,"/subtype/").concat(e):"/cards/subtype/".concat(e)},e))})))),c.a.createElement("div",{className:"col-md-8 cards"},c.a.createElement("div",{className:"row justify-content-center",style:{overflow:"hidden"}},W&&c.a.createElement("div",{className:"error"},"Error"),K&&c.a.createElement(x,null),!K&&$&&(0===$.data.cards.length?c.a.createElement(h,null):null),!K&&$&&$.data.cards.map((function(t){return c.a.createElement("div",{className:"col-md-4 rounded",key:t.id},c.a.createElement("div",{className:"card mb-3 bg-light"},c.a.createElement("img",{className:"card-img-top",src:t.imageUrl,alt:"".concat(t.name," img")}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",{className:"card-title"},t.name),c.a.createElement("div",{className:"card-text"},"Artist: ",t.artist)),c.a.createElement(s.b,{className:"btn btn-dark",to:{pathname:"/cards/".concat(t.id),state:{from:e.location}}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")))}))),$&&c.a.createElement(F,{total:$.headers["total-count"],limit:6,currentPage:parseInt(e.location.search.replace(/[^\d]/g,""))||1,url:"".concat(e.match.url)})))))},M=a(33),P=function(e){var t=e.component,a=Object(M.a)(e,["component"]),n=d("token"),r=Object(m.a)(n,1)[0];return c.a.createElement(g.b,Object.assign({},a,{render:function(e){return r?c.a.createElement(t,e):c.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=function(){return c.a.createElement(g.d,null,c.a.createElement(g.b,{path:"/login",component:A}),c.a.createElement(P,{path:"/",exact:!0,component:T}),c.a.createElement(P,{path:"/cards/:id",exact:!0,component:w}),c.a.createElement(P,{path:"/cards/type/:typeId",exact:!0,component:T}),c.a.createElement(P,{path:"/cards/subtype/:subtypeId",component:T}),c.a.createElement(P,{path:"/cards/type/:typeId/subtype/:subtypeId",component:T}),c.a.createElement(g.a,{to:"/"}))};l.a.render(c.a.createElement(u,null,c.a.createElement(b,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{basename:"/Pokemon-app-react-hooks-"},c.a.createElement(U,null))))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.ef4eca9f.chunk.js.map