(this["webpackJsonpkode-tasks"]=this["webpackJsonpkode-tasks"]||[]).push([[0],{32:function(e,t,a){e.exports=a(59)},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(27),l=a.n(r),s=a(4),o=a(2),m=a(1),u=Object(n.createContext)([{},function(){}]),i=function(e){var t=e.children,a=Object(n.useState)({isLoading:!1,isLoggedIn:null,currentUser:null}),r=Object(m.a)(a,2),l=r[0],s=r[1];return c.a.createElement(u.Provider,{value:[l,s]},t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Object(n.useState)((function(){return localStorage.getItem(e)||t})),c=Object(m.a)(a,2),r=c[0],l=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,r)}),[r,e]),[r,l]},p=function(){var e=d("token"),t=Object(m.a)(e,1)[0],a=Object(n.useState)(!1),c=Object(m.a)(a,2),r=c[0],l=c[1],s=Object(n.useState)(null),u=Object(m.a)(s,2),i=u[0],p=u[1],b=Object(n.useState)(null),E=Object(m.a)(b,2),g=E[0],f=E[1],O=Object(n.useState)({}),j=Object(m.a)(O,2),y=j[0],v=j[1],h=Object(n.useState)(""),N=Object(m.a)(h,2),k=N[0],S=N[1],I=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(e),l(!0)}),[]);return Object(n.useEffect)((function(){var e=Object(o.a)(Object(o.a)({},y),{headers:{authorization:t?"Token ".concat(t):""}});console.log(e),r&&(e.headers.authorization&&(l(!1),p({user:{name:"KODEr",id:1,token:e.headers.authorization}})),e.data&&"kode@kode.ru"===e.data.user.email&&"Enk0deng"===e.data.user.password?(l(!1),S(Math.ceil(1e4*Math.random())),p({user:{name:"KODEr",id:1,token:Math.random()}})):(l(!1),f("Invalid data")))}),[r,y,t]),[{isLoading:r,response:i,error:g,otp:k},I]},b=function(e){var t=e.children,a=p(),c=Object(m.a)(a,2),r=c[0].response,l=c[1],s=Object(n.useContext)(u),i=Object(m.a)(s,2)[1],b=d("token"),E=Object(m.a)(b,1)[0];return Object(n.useEffect)((function(){E?(l(),i((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!0})}))):i((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoggedIn:!1})}))}),[i,E,l]),Object(n.useEffect)((function(){r&&i((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:!0,currentUser:r.user})}))}),[r,i]),t},E=function(){var e=Object(n.useContext)(u),t=Object(m.a)(e,2)[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",{className:"navbar navbar-dark bg-dark d-flex justify-content-between"},c.a.createElement("div",{className:"container"},c.a.createElement(s.c,{className:"btn btn-primary",to:"/"},"Back"),c.a.createElement(s.c,{onClick:function(){return t((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:null,currentUser:null})})),void localStorage.removeItem("token")},className:"",to:"/login"},"Logout"))))},g=a(3),f=a(29),O=a.n(f),j=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),s=Object(m.a)(l,2),o=s[0],u=s[1],i=Object(n.useState)(null),d=Object(m.a)(i,2),p=d[0],b=d[1],E=Object(n.useState)({}),g=Object(m.a)(E,2),f=g[0],j=g[1],y=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j(e),r(!0)}),[]);return Object(n.useEffect)((function(){c&&O()("https://api.pokemontcg.io/v1"+e,f).then((function(e){r(!1),u(e)})).catch((function(e){r(!1),b(e)}))}),[c,f,e]),[{isLoading:c,response:o,error:p},y]},y=function(e){var t=j("/cards/".concat(e.match.params.id)),a=Object(m.a)(t,2),r=a[0],l=r.isLoading,s=r.response,o=r.error,u=a[1];return Object(n.useEffect)((function(){u()}),[u]),console.log(e),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"card card-item my-3"},c.a.createElement("div",{className:"row no-gutters"},!s&&l&&c.a.createElement("h1",null,"Loading..."),!s&&o&&c.a.createElement("h1",null,"error..."),s&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"col-md-6"},s.data.card.imageUrlHiRes&&c.a.createElement("img",{src:s.data.card.imageUrlHiRes,alt:"".concat(s.data.card.name," img"),style:{maxWidth:"100%"},className:"card-img"}),s.data.card.ability&&c.a.createElement("div",{className:"card-item__description m-4"},s.data.card.ability.text," ")||s.data.card.text&&c.a.createElement("div",{className:"card-item__description m-4"},s.data.card.text.map((function(e){return e}))," ")||null),c.a.createElement("div",{className:"col-md-5 ml-5"},c.a.createElement("div",{className:"card-body"},c.a.createElement("h1",{className:"card-title"},s.data.card.name?s.data.card.name:"Doesn't have name???"),s.data.card.types&&c.a.createElement("div",{className:"card-text card__type"},"Types: ",s.data.card.types),s.data.card.subtype&&c.a.createElement("div",{className:"card-text card__subtype"},"SubType: ",s.data.card.subtype),c.a.createElement("hr",null),c.a.createElement("div",{className:"card-text card__attacks"},c.a.createElement("strong",null,"Attacks:"),s.data.card.attacks?s.data.card.attacks.map((function(e){return c.a.createElement("div",{key:e.name},c.a.createElement("div",null,"Attack Name: ",e.name),e.text&&c.a.createElement("div",null,"Description: ")&&e.text,c.a.createElement("div",null,"Cost:"," ",e.cost.map((function(e,t){return c.a.createElement("span",{key:t},"".concat(e),", ")}))))})):" N/A",c.a.createElement("hr",null)),c.a.createElement("div",{className:"card-text card__resistance"},c.a.createElement("strong",null,"Resistance:"),s.data.card.resistances?s.data.card.resistances.map((function(e,t){return c.a.createElement("p",{key:t},"Type: ",e.type,c.a.createElement("br",null),"Value: ",e.value)})):" N/A"),c.a.createElement("hr",null),c.a.createElement("div",{className:"card-text card__evolves-from"},c.a.createElement("strong",null,"Evolves From: "),s.data.card.evolvesFrom?c.a.createElement("span",null,s.data.card.evolvesFrom):" N/A")))))))},v=a(30),h=function(e,t,a){var n=[];return e.forEach((function(e){return 0===e.toLowerCase().indexOf(t.target.value.toLowerCase())&&n.push(e),e})),a(n),n},N=function(e){return/^(([^<>()\]\\.,;:\s@"]+(\.[^<>()\]\\.,;:\s@"]+)*)|(".+"))@(([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},k=function(e){return/^[0-9a-zA-Z]{4,}$/.test(String(e))},S=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(m.a)(l,2),i=s[0],b=s[1],E=Object(n.useState)(!1),f=Object(m.a)(E,2),O=f[0],j=f[1],y=d("token"),v=Object(m.a)(y,2)[1],h=p(),S=Object(m.a)(h,2),I=S[0],L=I.isLoading,x=I.response,C=I.error,w=I.otp,_=S[1],A=Object(n.useContext)(u),F=Object(m.a)(A,2),P=F[0],T=F[1],z=Object(n.useState)(""),U=Object(m.a)(z,2),D=U[0],M=U[1],R=Object(n.useState)(""),V=Object(m.a)(R,2),Z=V[0],B=V[1],H=Object(n.useState)(!1),J=Object(m.a)(H,2),K=J[0],$=J[1],W=Object(n.useState)({email:!0,password:!0}),q=Object(m.a)(W,2),G=q[0],Q=q[1];Object(n.useEffect)((function(){C&&M((function(){return c.a.createElement("p",null,"Invalid data")})),x&&(console.log("OTP:",w),$(!0))}),[x,C,w]);return O?c.a.createElement(g.a,{to:"/"}):c.a.createElement(c.a.Fragment,null,P.isLoggedIn?c.a.createElement(g.a,{to:"/"}):c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 mx-auto",style:{marginTop:"25vh"}},c.a.createElement("h1",null,"Auth"),!K&&c.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),Q({email:N(i),password:k(a)}),G.email&&G.email)&&_({method:"post",data:{user:{email:i,password:a}}})}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"loginInput"},"Login"),c.a.createElement("input",{type:"email",className:"form-control",id:"loginInput",onChange:function(e){return b(e.target.value)}}),G.email?null:c.a.createElement("p",null,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"passwordInput"},"Password"),c.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",onChange:function(e){return r(e.target.value)}}),G.password?null:c.a.createElement("p",null,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 password")),D&&D,c.a.createElement("button",{disabled:L,type:"submit",className:"btn btn-primary"},"Log in")),K&&c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),w===+Z&&(v(x.user.token),T((function(e){return Object(o.a)(Object(o.a)({},e),{},{isLoading:!1,isLoggedIn:!0,currentUser:x.user})})),j(!0))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"otpInput"},"Otp"),c.a.createElement("input",{type:"text",className:"form-control",id:"otpInput",onChange:function(e){return B(e.target.value)}})),D&&D,c.a.createElement("button",{disabled:L,type:"submit",className:"btn btn-primary"},"Confirm"))))))},I=function(e){var t=e.page,a=e.currentPage,n=e.url,r={pageItem:a===t?"active page-item":"page-item"};return c.a.createElement("li",{className:r.pageItem},c.a.createElement(s.b,{className:"page-link",to:"".concat(n,"?page=").concat(t)},t))},L=function(e){var t,a,n=e.total,r=e.limit,l=e.url,o=e.currentPage,m=Math.ceil(n/r),u=(t=1,a=m,Object(v.a)(Array(a).keys()).map((function(e){return e+t}))),i=[];if(0===u.length)return null;return c.a.createElement("ul",{className:"pagination justify-content-center my-5"},o>4?c.a.createElement("li",{className:"page-item"},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=1")},"First page")):null,o>1?c.a.createElement("li",{className:""},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=").concat(o-1)},"Prev page")):null,function(){for(var e=u.length<6?1:o+3>=u.length?u.length-6+1:o-3>0?o-3:o-3<=0?1:void 0;e-1<u.length;e++){if(i.push(e),u.length===e)return[].concat(i);if(i.length>=6)return[].concat(i)}}().map((function(e){return c.a.createElement(I,{page:e,currentPage:o,url:l,key:e})})),o+1<=u.length?c.a.createElement("li",{className:""},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=").concat(o+1)},"Next page")):null,o+3+1<u.length?c.a.createElement("li",{className:""},c.a.createElement(s.b,{className:"page-link",to:"".concat(l,"?page=").concat(u.length)},"Last page")):null)},x=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),r=a[0],l=a[1];return c.a.createElement("div",{className:"card"},c.a.createElement("button",{onClick:function(){return r&&l(!1),void(r||l(!0))}},c.a.createElement("div",{className:"card-header"},e.label)||"Loading.."),r&&c.a.createElement("ul",{className:"list-group list-group-flush"},e.error&&c.a.createElement("li",{className:"list-group-item"},"Error"),e.isLoading&&c.a.createElement("li",{className:"list-group-item"},"Loading..."),e.children))},C=function(e){var t=j("/types"),a=Object(m.a)(t,2),r=a[0],l=r.isLoading,u=r.response,i=r.error,d=a[1],p=j("/subtypes"),b=Object(m.a)(p,2),E=b[0],g=E.isLoading,f=E.response,O=E.error,y=b[1],v=Object(n.useState)({}),N=Object(m.a)(v,2),k=N[0],S=N[1],I=Object(n.useState)(),C=Object(m.a)(I,2),w=C[0],_=C[1],A=Object(n.useState)(),F=Object(m.a)(A,2),P=F[0],T=F[1],z=Object(n.useState)({type:"",subtype:""}),U=Object(m.a)(z,2),D=U[0],M=U[1],R=j("/cards"),V=Object(m.a)(R,2),Z=V[0],B=Z.isLoading,H=Z.response,J=Z.error,K=V[1],$=Object(n.useState)(""),W=Object(m.a)($,2),q=W[0],G=W[1];return Object(n.useEffect)((function(){d(),y()}),[d,y]),Object(n.useEffect)((function(){_(f&&f.data.subtypes),T(u&&u.data.types)}),[_,T,f,u]),Object(n.useEffect)((function(){!k.subtype&&e.match.params.subtypeId&&S(Object(o.a)(Object(o.a)({},k),{},{subtype:e.match.params.subtypeId})),!k.type&&e.match.params.typeId&&S(Object(o.a)(Object(o.a)({},k),{},{type:e.match.params.typeId}))}),[e.match.params.subtypeId,e.match.params.typeId,k]),Object(n.useEffect)((function(){G({method:"get",params:{types:k.type||e.match.params.typeId||null,subtype:k.subtype||e.match.params.subtypeId||null,pageSize:15,page:parseInt(e.location.search.replace(/[^\d]/g,""))||1}})}),[e.match,e.location.search,k]),Object(n.useEffect)((function(){q&&K(q)}),[K,q]),c.a.createElement("div",{className:"container mt-5"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 selects"},c.a.createElement(x,{error:i||null,isLoading:l||null,label:"Types"},u&&c.a.createElement("input",{type:"text",onChange:function(e){h(u.data.types,e,T),M(Object(o.a)(Object(o.a)({},D),{},{type:e.target.value}))},defaultValue:D.type||""}),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(s.c,{onClick:function(){return S(Object(o.a)(Object(o.a)({},k),{},{type:null}))},to:k.subtype?"/cards/subtype/".concat(k.subtype):"/"},"All Types")),P&&P.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item"},c.a.createElement(s.c,{onClick:function(){return S(Object(o.a)(Object(o.a)({},k),{},{type:e}))},to:k.subtype?"/cards/type/".concat(e,"/subtype/").concat(k.subtype):"/cards/type/".concat(e)},e))}))),c.a.createElement(x,{error:O||null,isLoading:g||null,label:"Subtypes"},f&&c.a.createElement("input",{type:"text",onChange:function(e){h(f.data.subtypes,e,_),M(Object(o.a)(Object(o.a)({},D),{},{subtype:e.target.value}))},defaultValue:D.subtype||""}),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(s.c,{onClick:function(){return S(Object(o.a)(Object(o.a)({},k),{},{subtype:null}))},to:k.type?"/cards/type/".concat(k.type):"/"},"All Subtypes")),w&&w.map((function(e,t){return c.a.createElement("li",{key:t,className:"list-group-item"},c.a.createElement(s.c,{onClick:function(){return S(Object(o.a)(Object(o.a)({},k),{},{subtype:e}))},to:k.type?"/cards/type/".concat(k.type,"/subtype/").concat(e):"/cards/subtype/".concat(e)},e))})))),c.a.createElement("div",{className:"col-md-8 cards"},c.a.createElement("div",{className:"row"},J&&c.a.createElement("div",{className:"error"},"Error"),B&&c.a.createElement("div",{className:"loading"},"Loading"),!B&&H&&H.data.cards.map((function(t){return c.a.createElement("div",{className:"col-md-4 rounded",key:t.id},c.a.createElement("div",{className:"card mt-3"},c.a.createElement("img",{className:"card-img-top",src:t.imageUrl,alt:"".concat(t.name," img")}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h3",{className:"card-title"},t.name),c.a.createElement("div",{className:"card-text"},"Artist: ",t.artist)),c.a.createElement(s.b,{className:"btn btn-primary",to:{pathname:"/cards/".concat(t.id),state:{from:e.location}}},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")))}))),H&&c.a.createElement(L,{total:H.headers["total-count"],limit:15,currentPage:parseInt(e.location.search.replace(/[^\d]/g,""))||1,url:"".concat(e.match.url)}))))},w=a(31),_=function(e){var t=e.component,a=Object(w.a)(e,["component"]),n=d("token"),r=Object(m.a)(n,1)[0];return c.a.createElement(g.b,Object.assign({},a,{render:function(e){return r?c.a.createElement(t,e):c.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},A=function(){return c.a.createElement(g.d,null,c.a.createElement(g.b,{path:"/login",component:S}),c.a.createElement(_,{path:"/",exact:!0,component:C}),c.a.createElement(_,{path:"/cards/:id",exact:!0,component:y}),c.a.createElement(_,{path:"/cards/type/:typeId",exact:!0,component:C}),c.a.createElement(_,{path:"/cards/subtype/:subtypeId",component:C}),c.a.createElement(_,{path:"/cards/type/:typeId/subtype/:subtypeId",component:C}),c.a.createElement(g.a,{to:"/"}))};l.a.render(c.a.createElement(i,null,c.a.createElement(b,null,c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,null,c.a.createElement(E,null),c.a.createElement(A,null))))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ff4079c6.chunk.js.map